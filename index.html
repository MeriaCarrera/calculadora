<!DOCTYPE html>
<html lang="en">
 
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="estils.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    
    <title>Calculadora</title>
</head>
 
<body>
    <!--2A CALCULADORA FETA: ELS NUMEROS COMPARTEIXEN FUNCIÓ -->
    <div class="calcul">
        <h3 id="pantallaResultat"></h3>
        <button type="button" value="7" onClick="posarNum(value)" class="btn btn-info m-1">7</button>
        <button type="button" value="8" onClick="posarNum(value)" class="btn btn-info m-1">8</button>
        <button type="button" value="9" onClick="posarNum(value)" class="btn btn-info m-1">9</button>
        <button type="button" value="+" onClick="posarOper(value)" class="btn btn-secondary m-1">+</button><br>
        <button type="button" value="4" onClick="posarNum(value)" class="btn btn-info m-1">4</button>
        <button type="button" value="5" onClick="posarNum(value)" class="btn btn-info m-1">5</button>
        <button type="button" value="6" onClick="posarNum(value)" class="btn btn-info m-1">6</button>
        <button type="button" value="-" onClick="posarOper(value)" class="btn btn-secondary m-1">-</button><br>
        <button type="button" value="1" onClick="posarNum(value)" class="btn btn-info m-1">1</button>
        <button type="button" value="2" onClick="posarNum(value)" class="btn btn-info m-1">2</button>
        <button type="button" value="3" onClick="posarNum(value)" class="btn btn-info m-1">3</button>
        <button type="button" value="*" onClick="posarOper(value)" class="btn btn-secondary m-1">*</button><br>
        <button type="button" onClick="borrarTot()" class="btn btn-secondary m-1">C</button>
        <button type="button" value="0" onClick="posarNum(value)" class="btn btn-info m-1">0</button>
        <button type="button" value="/" onClick="posarOper(value)" class="btn btn-secondary m-1">/</button>
        <button type="button" onClick="veureResultat()" class="btn btn-secondary m-1">=</button>
    </div>

    <script>
        let numero = "";
        let operacions = [];

        // TOTS ELS NÚMEROS JUNTS
        function posarNum(value){
            g = parseInt(value);
            numero = (numero*10) + g;
            pantallaResultat.innerText=numero;
        }

        //BORRAR
        function borrarTot(){
            numero = "";
            operacions = [];
            pantallaResultat.innerText=numero;
        }

        // TOTES LES OPERACIONS JUNTES
        function posarOper(value){
            let o = operacions[operacions.length -1];
            if (operacions==[]){
            } else if(numero != ""){
                operacions.push(numero);
                operacions.push(value);
                numero = "";
            }else if(o == "+" ||o == "-"||o == "*"||o == "/"){
                operacions.pop()
                operacions.push(value);
            }
        }

        //RESULTAT
        function veureResultat(){
            operacions.push(numero);
            let num = operacions[0];
            let signe = "";
            console.log("array: " + operacions);
            for (let i=0; i<operacions.length; i++){
                if (operacions[i] == "+" ||operacions[i] == "-"||operacions[i] == "*"||operacions[i] == "/"){
                    signe = operacions[i];
                    console.log("signe: " + operacions[i])
                }else{
                    if (signe== "+"){
                        num = num + operacions[i];
                    }else if (signe== "-"){
                        num = num - operacions[i];
                    }else if (signe== "*"){
                        num = num * operacions[i];
                    }else if (signe== "/"){
                        num = num / operacions[i];
                    }
                    if (num == Infinity){
                        num=0;
                    }
                }
            }
            console.log(num);
            pantallaResultat.innerText=num;
            operacions = [];
            numero = "";
        }
    </script>
</body>
</html>